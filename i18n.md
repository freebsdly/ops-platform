# å›½é™…åŒ– (i18n) é…ç½®ä¸ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ `@ngx-translate/core` å’Œ `ng-zorro-antd/i18n` å®ç°å›½é™…åŒ–æ”¯æŒï¼Œç›®å‰æ”¯æŒ **ä¸­æ–‡** å’Œ **è‹±æ–‡** ä¸¤ç§è¯­è¨€ã€‚

## ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ i18n/
â”‚       â”œâ”€â”€ zh.json      # ä¸­æ–‡ç¿»è¯‘
â”‚       â””â”€â”€ en.json      # è‹±æ–‡ç¿»è¯‘
â””â”€â”€ app/
    â”œâ”€â”€ layout/
    â”‚   â””â”€â”€ lang-selector/    # è¯­è¨€é€‰æ‹©å™¨ç»„ä»¶
    â””â”€â”€ app.config.ts         # å›½é™…åŒ–é…ç½®
```

## é…ç½®è¯¦è§£

### 1. åº”ç”¨é…ç½® (app.config.ts)

```typescript
// æ³¨å†Œè¯­è¨€ç¯å¢ƒæ•°æ®
registerLocaleData(zh);
registerLocaleData(en);

// ngx-translate é…ç½®
provideTranslateService({
  loader: provideTranslateHttpLoader({
    prefix: '/assets/i18n/',
    suffix: '.json',
  }),
  fallbackLang: 'zh',  // åå¤‡è¯­è¨€
  lang: 'zh',          // é»˜è®¤è¯­è¨€
}),

// ng-zorro-antd å›½é™…åŒ–
provideNzI18n(zh_CN),
{ provide: NZ_I18N, useValue: zh_CN },
```

### 2. ç¿»è¯‘æ–‡ä»¶ç»“æ„

ç¿»è¯‘æ–‡ä»¶é‡‡ç”¨ JSON æ ¼å¼ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ï¼š

```json
{
  "APP": { ... },            // åº”ç”¨çº§æ–‡æœ¬
  "MENU": { ... },           // èœå•é¡¹
  "LAYOUT": { ... },         // å¸ƒå±€ç›¸å…³
  "BUTTONS": { ... },        // æŒ‰é’®æ–‡æœ¬
  "COMMON": { ... },         // é€šç”¨æ–‡æœ¬
  "SETTINGS": { ... },       // è®¾ç½®é¡µé¢
  "LANGUAGE": { ... },       // è¯­è¨€é€‰æ‹©å™¨
  "USER_CARD": { ... },      // ç”¨æˆ·å¡ç‰‡
  "MODULE_SELECTOR": { ... } // æ¨¡å—é€‰æ‹©å™¨
}
```

## ä½¿ç”¨æ–¹æ³•

### 1. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘

**å¯¼å…¥ TranslateModuleï¼š**

```typescript
import { Component } from '@angular/core';
import { TranslateModule } from '@ngx-translate/core';

@Component({
  selector: 'app-my-component',
  imports: [TranslateModule],  // å¿…é¡»å¯¼å…¥
  template: `...`
})
export class MyComponent {}
```

**åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š**

```html
<!-- ç®€å•ä½¿ç”¨ -->
<h1>{{ 'APP.TITLE' | translate }}</h1>

<!-- å¸¦å‚æ•° -->
<p>{{ 'GREETING' | translate:{name: 'John'} }}</p>

<!-- åœ¨å±æ€§ä¸­ä½¿ç”¨ -->
<button [title]="'BUTTONS.SAVE' | translate">
  {{ 'BUTTONS.SAVE' | translate }}
</button>

<!-- åœ¨ nz-dropdown ç­‰ç»„ä»¶ä¸­ä½¿ç”¨ -->
<nz-dropdown [nzPlacement]="'bottomRight'">
  <span>{{ 'LANGUAGE.SELECT' | translate }}</span>
</nz-dropdown>
```

### 2. åœ¨ TypeScript ä¸­ä½¿ç”¨ç¿»è¯‘

```typescript
import { inject } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';

export class MyComponent {
  private translate = inject(TranslateService);

  // è·å–å½“å‰è¯­è¨€
  getCurrentLang(): string {
    return this.translate.currentLang;
  }

  // è·å–ç¿»è¯‘æ–‡æœ¬
  getTranslation(): void {
    this.translate.get('MENU.DASHBOARD').subscribe((text: string) => {
      console.log(text); // "ä»ªè¡¨æ¿" æˆ– "Dashboard"
    });
  }

  // è·å–å¤šä¸ªç¿»è¯‘
  getMultipleTranslations(): void {
    this.translate.get(['MENU.DASHBOARD', 'BUTTONS.SAVE']).subscribe((translations: any) => {
      console.log(translations['MENU.DASHBOARD']);
      console.log(translations['BUTTONS.SAVE']);
    });
  }
}
```

### 3. åŠ¨æ€åˆ‡æ¢è¯­è¨€

é¡¹ç›®å·²ç»æä¾›äº†è¯­è¨€é€‰æ‹©å™¨ç»„ä»¶ (`LangSelector`)ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```html
<app-lang-selector></app-lang-selector>
```

å¦‚æœéœ€è¦æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€ï¼š

```typescript
import { inject } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import { NzI18nService } from 'ng-zorro-antd/i18n';

export class MyComponent {
  private translate = inject(TranslateService);
  private i18n = inject(NzI18nService);

  changeLanguage(lang: string): void {
    // åˆ‡æ¢ ngx-translate è¯­è¨€
    this.translate.use(lang);
    
    // åˆ‡æ¢ ng-zorro-antd è¯­è¨€
    if (lang === 'zh') {
      this.i18n.setLocale(zh_CN);
    } else if (lang === 'en') {
      this.i18n.setLocale(en_US);
    }
    
    // ä¿å­˜ç”¨æˆ·åå¥½
    localStorage.setItem('preferredLanguage', lang);
    
    // åˆ·æ–°é¡µé¢ä½¿å˜æ›´ç”Ÿæ•ˆï¼ˆæŸäº›ç»„ä»¶éœ€è¦ï¼‰
    window.location.reload();
  }
}
```

## æ·»åŠ æ–°çš„ç¿»è¯‘

### 1. æ·»åŠ ç¿»è¯‘é”®å€¼å¯¹

**åœ¨ zh.json ä¸­æ·»åŠ ï¼š**

```json
{
  "NEW_MODULE": {
    "TITLE": "æ–°æ¨¡å—",
    "DESCRIPTION": "æ–°æ¨¡å—çš„æè¿°",
    "ACTION": {
      "ADD": "æ·»åŠ ",
      "EDIT": "ç¼–è¾‘",
      "DELETE": "åˆ é™¤"
    }
  }
}
```

**åœ¨ en.json ä¸­æ·»åŠ å¯¹åº”çš„ç¿»è¯‘ï¼š**

```json
{
  "NEW_MODULE": {
    "TITLE": "New Module",
    "DESCRIPTION": "Description of new module",
    "ACTION": {
      "ADD": "Add",
      "EDIT": "Edit",
      "DELETE": "Delete"
    }
  }
}
```

### 2. å‘½åè§„èŒƒ

- ä½¿ç”¨ **å¤§å†™å­—æ¯** å’Œ **ä¸‹åˆ’çº¿** åˆ†éš”å•è¯
- ä½¿ç”¨ **ç‚¹å·** è¡¨ç¤ºå±‚çº§å…³ç³»
- ä¿æŒä¸­è‹±æ–‡é”®ç»“æ„ä¸€è‡´

**æ¨èï¼š**
```
"USER_MANAGEMENT": {
  "TITLE": "ç”¨æˆ·ç®¡ç†",
  "ADD_USER": "æ·»åŠ ç”¨æˆ·",
  "EDIT_USER": "ç¼–è¾‘ç”¨æˆ·"
}
```

**ä¸æ¨èï¼š**
```
"userManagement": "ç”¨æˆ·ç®¡ç†",
"addUser": "æ·»åŠ ç”¨æˆ·"
```

## æœ€ä½³å®è·µ

### 1. ç»„ä»¶å›½é™…åŒ–æ­¥éª¤

1. **è§„åˆ’ç¿»è¯‘é”®ï¼š** ä¸ºç»„ä»¶ä¸­æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬è§„åˆ’é”®å
2. **æ·»åŠ åˆ°ç¿»è¯‘æ–‡ä»¶ï¼š** åœ¨ `zh.json` å’Œ `en.json` ä¸­æ·»åŠ å¯¹åº”çš„ç¿»è¯‘
3. **å¯¼å…¥ TranslateModuleï¼š** åœ¨ç»„ä»¶ä¸­å¯¼å…¥ `TranslateModule`
4. **ä½¿ç”¨ç¿»è¯‘ç®¡é“ï¼š** åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ `| translate` ç®¡é“
5. **æµ‹è¯•ï¼š** åˆ‡æ¢è¯­è¨€æµ‹è¯•ç¿»è¯‘æ˜¯å¦æ­£ç¡®æ˜¾ç¤º

### 2. ä¿æŒç¿»è¯‘ä¸€è‡´æ€§

- **ç›¸åŒæ„ä¹‰çš„æ–‡æœ¬ä½¿ç”¨ç›¸åŒçš„ç¿»è¯‘é”®ï¼š** ä¾‹å¦‚ï¼Œ"ä¿å­˜" æŒ‰é’®åœ¨æ•´ä¸ªåº”ç”¨ä¸­éƒ½ä½¿ç”¨ `BUTTONS.SAVE`
- **é¿å…ç¡¬ç¼–ç æ–‡æœ¬ï¼š** æ‰€æœ‰ç”¨æˆ·å¯è§çš„æ–‡æœ¬éƒ½åº”è¯¥ä½¿ç”¨ç¿»è¯‘
- **åŠæ—¶æ›´æ–°ç¿»è¯‘ï¼š** æ·»åŠ æ–°åŠŸèƒ½æ—¶åŒæ­¥æ›´æ–°ç¿»è¯‘æ–‡ä»¶

### 3. å¤„ç†åŠ¨æ€å†…å®¹

å¯¹äºåŒ…å«å˜é‡çš„ç¿»è¯‘ï¼š

```json
// ç¿»è¯‘æ–‡ä»¶
{
  "WELCOME_MESSAGE": "æ¬¢è¿ï¼Œ{{name}}ï¼",
  "ITEMS_COUNT": "å…± {{count}} ä¸ªé¡¹ç›®"
}
```

```html
<!-- æ¨¡æ¿ä¸­ä½¿ç”¨ -->
<p>{{ 'WELCOME_MESSAGE' | translate:{name: userName} }}</p>
<p>{{ 'ITEMS_COUNT' | translate:{count: itemCount} }}</p>
```

### 4. å¤æ•°å¤„ç†

ä½¿ç”¨å‚æ•°å¤„ç†å¤æ•°å½¢å¼ï¼š

```json
{
  "MESSAGE_COUNT": "{{count}} æ¡æ¶ˆæ¯",
  "MESSAGE_COUNT_PLURAL": "{{count}} æ¡æ¶ˆæ¯"
}
```

```typescript
// TypeScript ä¸­å¤„ç†
getMessageText(count: number): string {
  return this.translate.instant(count === 1 ? 'MESSAGE_COUNT' : 'MESSAGE_COUNT_PLURAL', { count });
}
```

## å¸¸è§é—®é¢˜

### 1. ç¿»è¯‘ä¸ç”Ÿæ•ˆ

**æ£€æŸ¥ï¼š**
- æ˜¯å¦æ­£ç¡®å¯¼å…¥äº† `TranslateModule`
- ç¿»è¯‘é”®æ˜¯å¦æ­£ç¡®ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰
- ç¿»è¯‘æ–‡ä»¶æ˜¯å¦å·²æ·»åŠ å¯¹åº”çš„é”®å€¼å¯¹
- æ˜¯å¦åœ¨æ­£ç¡®çš„è¯­è¨€ç¯å¢ƒä¸‹æµ‹è¯•

### 2. ng-zorro-antd ç»„ä»¶æœªç¿»è¯‘

**åŸå› ï¼š** ng-zorro-antd çš„å›½é™…åŒ–éœ€è¦å•ç‹¬è®¾ç½®
**è§£å†³ï¼š** ç¡®ä¿è°ƒç”¨äº† `this.i18n.setLocale()` å¹¶åˆ·æ–°é¡µé¢

### 3. æ–°å¢è¯­è¨€æ”¯æŒ

å¦‚æœéœ€è¦æ·»åŠ æ–°çš„è¯­è¨€ï¼ˆå¦‚æ—¥è¯­ï¼‰ï¼š

1. å®‰è£…è¯­è¨€åŒ…ï¼š
   ```bash
   npm install @angular/common@latest
   ```

2. åˆ›å»ºç¿»è¯‘æ–‡ä»¶ `ja.json`ï¼š
   ```json
   {
     "APP": {
       "TITLE": "é‹å–¶ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ "
     }
   }
   ```

3. æ›´æ–°é…ç½®ï¼š
   ```typescript
   import ja from '@angular/common/locales/ja';
   import { ja_JP } from 'ng-zorro-antd/i18n';
   
   registerLocaleData(ja);
   ```

4. æ›´æ–°è¯­è¨€é€‰æ‹©å™¨ï¼š
   ```typescript
   languages = [
     { key: 'zh', label: 'LANGUAGE.ZH', icon: 'ğŸ‡¨ğŸ‡³', locale: zh_CN },
     { key: 'en', label: 'LANGUAGE.EN', icon: 'ğŸ‡ºğŸ‡¸', locale: en_US },
     { key: 'ja', label: 'LANGUAGE.JA', icon: 'ğŸ‡¯ğŸ‡µ', locale: ja_JP },
   ];
   ```

## å¼€å‘æ³¨æ„äº‹é¡¹

1. **ä¸è¦ç¡¬ç¼–ç æ–‡æœ¬ï¼š** æ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬éƒ½åº”ä½¿ç”¨ç¿»è¯‘
2. **ä¿æŒç¿»è¯‘æ–‡ä»¶åŒæ­¥ï¼š** ä¿®æ”¹æˆ–æ·»åŠ ç¿»è¯‘æ—¶ï¼Œç¡®ä¿æ‰€æœ‰è¯­è¨€æ–‡ä»¶éƒ½æ›´æ–°
3. **æµ‹è¯•å¤šè¯­è¨€ï¼š** å¼€å‘è¿‡ç¨‹ä¸­å®šæœŸåˆ‡æ¢è¯­è¨€æµ‹è¯•
4. **è€ƒè™‘æ–‡æœ¬é•¿åº¦ï¼š** ä¸åŒè¯­è¨€çš„æ–‡æœ¬é•¿åº¦å¯èƒ½ä¸åŒï¼Œè®¾è®¡æ—¶è¦ç•™æœ‰ä½™åœ°
5. **æ ¼å¼åŒ–å¤„ç†ï¼š** æ—¥æœŸã€æ•°å­—ã€è´§å¸ç­‰æ ¼å¼åŒ–ä½¿ç”¨ Angular çš„ `DatePipe`ã€`CurrencyPipe` ç­‰

## ç›¸å…³æ–‡ä»¶

- `src/assets/i18n/zh.json` - ä¸­æ–‡ç¿»è¯‘
- `src/assets/i18n/en.json` - è‹±æ–‡ç¿»è¯‘
- `src/app/app.config.ts` - å›½é™…åŒ–é…ç½®
- `src/app/layout/lang-selector/` - è¯­è¨€é€‰æ‹©å™¨ç»„ä»¶
- `src/app/layout/sider-menu/` - èœå•å›½é™…åŒ–ç¤ºä¾‹
- `src/app/pages/welcome/` - é¡µé¢å›½é™…åŒ–ç¤ºä¾‹

## æ‰©å±•å»ºè®®

æœªæ¥å¯è€ƒè™‘æ·»åŠ ï¼š

1. **ç¿»è¯‘é”®è‡ªåŠ¨æå–å·¥å…·**
2. **åœ¨çº¿ç¿»è¯‘ç®¡ç†åå°**
3. **ç¿»è¯‘ç¼ºå¤±æ£€æµ‹**
4. **ç¿»è¯‘ç‰ˆæœ¬ç®¡ç†**
5. **ä¸“ä¸šç¿»è¯‘æœåŠ¡é›†æˆ**

---

*æœ€åæ›´æ–°: 2026å¹´1æœˆ29æ—¥*