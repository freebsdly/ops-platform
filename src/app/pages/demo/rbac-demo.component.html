<!-- src/app/pages/demo/rbac-demo.component.html -->
<div class="rbac-demo-container">
  <h2>RBAC 集成演示</h2>
  
  <div class="demo-section">
    <h3>1. 用户信息</h3>
    <div class="user-info">
      @if (user$ | async; as user) {
        <div class="user-details">
          <p><strong>用户名:</strong> {{ user.username }}</p>
          <p><strong>角色:</strong> {{ user.roles.join(', ') }}</p>
          <p><strong>权限数量:</strong> {{ user.permissions.length }}</p>
        </div>
      } @else {
        <p>未登录</p>
      }
    </div>
  </div>

  <div class="demo-section">
    <h3>2. 权限检查演示</h3>
    <div class="permission-checks">
      <div class="check-item">
        <button nz-button [nzType]="'primary'" 
                (click)="checkPermission('configuration', 'read')">
          检查配置读取权限
        </button>
        <span class="check-result">{{ permissionResults['config_read'] }}</span>
      </div>
      
      <div class="check-item">
        <button nz-button [nzType]="'default'" 
                (click)="checkPermission('user', 'manage')">
          检查用户管理权限
        </button>
        <span class="check-result">{{ permissionResults['user_manage'] }}</span>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h3>3. 权限指令演示</h3>
    <div class="directive-demo">
      <button nz-button 
              [permissionResource]="'configuration'" 
              [permissionAction]="'read'"
              (click)="onConfigRead()">
        配置读取按钮（有权限显示）
      </button>
      
      <button nz-button 
              [permissionResource]="'admin'" 
              [permissionAction]="'all'"
              (click)="onAdminAction()">
        管理员按钮（无权限隐藏）
      </button>
    </div>
  </div>

  <div class="demo-section">
    <h3>4. 管道演示</h3>
    <div class="pipe-demo">
      <p>
        有配置读取权限: 
        <span class="pipe-result" [class.has-permission]="'configuration' | hasPermission:'read'">
          {{ 'configuration' | hasPermission:'read' }}
        </span>
      </p>
      <p>
        有管理员角色: 
        <span class="pipe-result" [class.has-permission]="'admin' | hasRole">
          {{ 'admin' | hasRole }}
        </span>
      </p>
    </div>
  </div>
</div>